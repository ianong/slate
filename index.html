<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript--airwatch&quot;,&quot;javascript--mobileiron&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript--airwatch">AirWatch</a>
              <a href="#" data-language-name="javascript--mobileiron">MobileIron</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/AppDirect/mdm-service'>MDM Service</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>This API documentation is intented for MDM providers to integrate with AppDirect&rsquo;s MDM Microservice.</p>

<p>With this documentation, MDM providers will see the general workflow from AppDirect&rsquo;s Marketplace and will have an idea on what API&rsquo;s are needed to make the integration work.</p>

<p>This documentation is written to be generic. It is possible to have multiple API calls for a single AppDirect workflow.</p>

<p>The MDM Microservice is built in such a way that it can cater to different implementations of the MDM providers and store different provider models accordingly.</p>

          <h1 id="create-company">Create Company</h1>

<p>When a company is created in AppDirect Marketplace, and the company is flagged to support &ldquo;On-Device Sales Automation&rdquo;, a representation of that company needs to exist in the MDM.</p>

<h2 id="create-mdm-company">Create MDM Company</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code><span class="nx">POST</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/system/groups/{parentOrganizationGroupId}</span>

<span class="nx">Request</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Sample Company Name"</span><span class="p">,</span>
  <span class="s2">"LocationGroupType"</span><span class="p">:</span> <span class="s2">"Customer"</span>
<span class="p">}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"Value"</span><span class="p">:</span> <span class="mi">1000</span>
<span class="p">}</span>

</code></pre>
<p>This endpoint creates a representation of a Marketplace company in the MDM.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://mdm.com/api/companies</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Name of the company.</td>
</tr>
</tbody></table>

<h3 id="response-parameters">Response Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The MDM Company ID.</td>
</tr>
<tr>
<td>api_credentials</td>
<td>[Optional] Credentials used to make API calls in behalf of the company. This parameter may be broken down into username and password for APIs that support Basic Auth. Furthermore, this parameter may not be provided as part of the company create API.</td>
</tr>
</tbody></table>

<h2 id="add-apple-app-restriction-profile">Add Apple App Restriction Profile</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code><span class="nx">POST</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/v2/mdm/profiles/platforms/apple/create</span>

<span class="nx">Request</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"General"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"SystemAppRestriction"</span><span class="p">,</span>
    <span class="s2">"Description"</span><span class="p">:</span> <span class="s2">"System App Restriction"</span><span class="p">,</span>
    <span class="s2">"AssignedSmartGroups"</span><span class="p">:</span> <span class="p">[</span> <span class="mi">1234</span> <span class="p">],</span> 
    <span class="s2">"AssignmentType"</span><span class="p">:</span> <span class="s2">"Auto"</span><span class="p">,</span>
    <span class="s2">"IsActive"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"IsManaged"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"ManagedLocationGroupID"</span><span class="p">:</span> <span class="mi">1000</span>
  <span class="p">},</span>
  <span class="s2">"Restrictions"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"AllowAutomaticSyncWhileRoaming"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowBackup"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowBluetoothSettingsModification"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowChangesToCellularDataUsageForApps"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowChangesToFindMyFriends"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowDiagnosticDataToBeSentToApple"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowDocumentSync"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowEraseAllContentsandSettings"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowExplicitMusicAndPodcasts"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowFaceTime"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowFingerPrintForUnlock"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowGameCenter"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowHandoff"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowManualProfileInstallation"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowMultiplayerGaming"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowNews"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowOpeningManagedAppDocumentsInUnmanagedApps"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"AllowOpeningUnManagedAppDocumentsInManagedApps"</span><span class="p">:</span> <span class="kc">true</span>
    <span class="s2">"ShowNotificationsViewOnLockScreen"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"ShowTodayViewOnLockScreen"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"ShowUserGeneratedContentInSiri"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"HideApps"</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">"com.apple.AppStore"</span><span class="p">,</span>
      <span class="s2">"com.apple.compass"</span><span class="p">,</span>
      <span class="s2">"com.apple.facetime"</span><span class="p">,</span>
      <span class="s2">"com.apple.gamecenter"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"Value"</span><span class="p">:</span> <span class="mi">52</span>
<span class="p">}</span>
</code></pre>
<p>This endpoint creates an Apple App Restriction Profile for the company. This will allow restriction of apps and settings on all devices managed by the company. </p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://mdm.com/api/profiles/apple</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>comapany_id</td>
<td>ID of the company to add the profile.</td>
</tr>
<tr>
<td>restriction_settings</td>
<td>The Apple restriction settings. t should represent the <a href="https://developer.apple.com/library/content/featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206-CH1-SW13">Restrictions Payload</a> as defined by Apple.</td>
</tr>
</tbody></table>

<h3 id="response-parameters">Response Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The MDM Profile ID.</td>
</tr>
</tbody></table>

          <h1 id="setup-the-company">Setup the Company</h1>

<p>In order for the devices to work, the company has to setup all the tokens for the Apple Deployment Program. This includes setting up the following:</p>

<ul>
<li>APNs (Apple Push Notification service)</li>
<li>DEP (Device Enrolment Program)</li>
<li>VPP (Volume Purchase Program)</li>
</ul>

<h2 id="get-apns-plist">Get APNs PLIST</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code><span class="mi">1</span><span class="p">.</span> <span class="nx">Initiate</span> <span class="nx">APNs</span> <span class="nx">PLIST</span> <span class="nx">creation</span>

<span class="nx">GET</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/system/groups/{id}/apns?force={force}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span> 
  <span class="s2">"AppleId"</span> <span class="p">:</span> <span class="s2">"Text value"</span><span class="p">,</span> 
  <span class="s2">"CertificateSigningRequestBlobId"</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> 
  <span class="s2">"UploadedCertificateBlobId"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> 
  <span class="s2">"IssuedCertificateId"</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> 
  <span class="s2">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="mi">2</span><span class="p">.</span> <span class="nx">Download</span> <span class="nx">APNs</span> <span class="nx">PLIST</span>

<span class="nx">GET</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mam/blobs/downloadblob/{blobId}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="nx">File</span> <span class="nx">Data</span>
</code></pre>
<p>In order to manage Apple devices, the company will need an Apple Push Notification service (APNs) certificate. This API will get the PLIST certificate request from the MDM provider.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://mdm.com/api/apns</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>company_id</td>
<td>The MDM Company ID.</td>
</tr>
</tbody></table>

<h3 id="response-parameters">Response Parameters</h3>

<p>File data</p>

<h2 id="upload-apns-pem-certificate">Upload APNs PEM certificate</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code><span class="mi">1</span><span class="p">.</span> <span class="nx">Upload</span> <span class="nx">PEM</span> <span class="nx">certificate</span>

<span class="nx">POST</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mam/blobs/uploadblob?filename={filename}&amp;organizationgroupid={organizationgroupid}&amp;moduleType={moduleType}</span>

<span class="nx">Request</span> <span class="nx">Body</span><span class="p">:</span>
<span class="nx">File</span> <span class="nx">Data</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span> 
  <span class="s2">"Value"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="mi">2</span><span class="p">.</span> <span class="nx">Setup</span> <span class="nx">APNs</span> <span class="nx">needs</span>

<span class="nx">POST</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/system/groups/{id}/apns</span>

<span class="nx">Request</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span> 
  <span class="s2">"AppleId"</span> <span class="p">:</span> <span class="s2">"Text value"</span><span class="p">,</span> 
  <span class="s2">"CertificateSigningRequestBlobId"</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">"UploadedCertificateBlobId"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> 
  <span class="s2">"IssuedCertificateId"</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span> 
  <span class="s2">"Renew"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span> 
  <span class="s2">"CertificatePassword"</span> <span class="p">:</span> <span class="s2">"Text value"</span><span class="p">,</span> 
  <span class="s2">"id"</span> <span class="p">:</span> <span class="mi">1</span> 
<span class="p">}</span>
</code></pre>
<p>To complete the APNs certificate, the push certificate downloaded from Apple should be uploaded to the MDM provider. This API will upload the Apple-issued PEM to the MDM provider.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://mdm.com/api/apns</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>company_id</td>
<td>The MDM Company ID.</td>
</tr>
<tr>
<td>file</td>
<td>The PEM file from Apple.</td>
</tr>
</tbody></table>

<h2 id="get-dep-pem-certificate">Get DEP PEM certificate</h2>

<p>A public key from the MDM provider is required to obtain the encrypted Authentication Token file from Apple. This API will get the public key from the MDM provider.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://mdm.com/api/dep</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>company_id</td>
<td>The MDM Company ID.</td>
</tr>
</tbody></table>

<h3 id="response-parameters">Response Parameters</h3>

<p>File data</p>

<h2 id="upload-dep-token">Upload DEP token</h2>

<p>To complete the DEP setup, the encrypted Authentication Token provided by Apple needs to be uploaded to the MDM provider. This API will upload the DEP PEM token to the MDM provider</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://mdm.com/api/apns</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>company_id</td>
<td>The MDM Company ID.</td>
</tr>
<tr>
<td>file</td>
<td>The PEM file from Apple.</td>
</tr>
</tbody></table>

<h2 id="upload-vpp-stoken">Upload VPP sToken</h2>

<p>To add a VPP License Account, the Authentication Token from the Apple VPP account must be uploaded to the MDM provider. This API will upload the token to be able to manage VPP licenses.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://mdm.com/api/vpp</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>company_id</td>
<td>The MDM Company ID.</td>
</tr>
<tr>
<td>file</td>
<td>The VPP token file from Apple.</td>
</tr>
</tbody></table>

          <h1 id="user-membership-added">User Membership Added</h1>

<p>When a user is added to a company, that user should also be created in the MDM provider under the sepcified company</p>

<h2 id="create-user">Create User</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code>
<span class="nx">POST</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/system/users/adduser</span>

<span class="nx">Request</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"UserName"</span><span class="p">:</span> <span class="s2">"user123"</span><span class="p">,</span>
  <span class="s2">"Password"</span><span class="p">:</span> <span class="s2">"password"</span><span class="p">,</span>
  <span class="s2">"FirstName"</span><span class="p">:</span> <span class="s2">"First"</span><span class="p">,</span>
  <span class="s2">"LastName"</span><span class="p">:</span> <span class="s2">"Last"</span><span class="p">,</span>
  <span class="s2">"Status"</span><span class="p">:</span> <span class="s2">"True"</span><span class="p">,</span>
  <span class="s2">"Email"</span><span class="p">:</span> <span class="s2">"first.last@email.com"</span><span class="p">,</span>
  <span class="s2">"SecurityType"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">"LocationGroupId"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="s2">"Role"</span><span class="p">:</span> <span class="s2">"Basic Access"</span><span class="p">,</span>
  <span class="s2">"MessageType"</span><span class="p">:</span> <span class="s2">"None"</span>
<span class="p">}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"Value"</span><span class="p">:</span> <span class="mi">17</span>
<span class="p">}</span>

</code></pre>
<p>This endpoint creates a user in the MDM and assigns it to the specified company.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://mdm.com/api/user</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>comapany_id</td>
<td>The MDM Company ID.</td>
</tr>
<tr>
<td>user_id</td>
<td>Marketplace ID of the user. To protect information, the Marketplace user ID will be used as a name the user in the MDM. The value will be set the user&rsquo;s username or name.</td>
</tr>
</tbody></table>

<h3 id="response-parameters">Response Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The MDM User ID.</td>
</tr>
</tbody></table>

          <h1 id="user-membership-removed">User Membership Removed</h1>

<p>When a user is removed from a company, that user should also be removed from the specified company in the MDM provider.</p>

<h2 id="delete-user">Delete User</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code>
<span class="nx">DELETE</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/system/users/{userId}</span>

</code></pre>
<p>This endpoint deletes the the user from the MDM provider.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://mdm.com/api/user/{userId}</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>The MDM User ID.</td>
</tr>
</tbody></table>

          <h1 id="app-subscription-added">App Subscription Added</h1>

<p>When a company purchases applications from AppDirect Marketplace, a VPP application must be assigned to the company in the MDM.</p>

<h2 id="assign-vpp-application-to-the-company">Assign VPP application to the company</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code>
<span class="mi">1</span><span class="p">.</span> <span class="nx">Sync</span> <span class="nx">VPP</span> <span class="nx">applications</span>

<span class="nx">PUT</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mam/apps/purchased/VppSyncAssets/{organizationGroupId}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"Queued"</span><span class="p">,</span>
  <span class="s2">"statusCode"</span><span class="p">:</span> <span class="mi">5</span>
<span class="p">}</span>

<span class="mi">2</span><span class="p">.</span> <span class="nx">Get</span> <span class="nx">purchased</span> <span class="nx">VPP</span> <span class="nx">applications</span>

<span class="nx">GET</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mam/apps/purchased/search?locationgroupid={organizationGroupId}</span>

<span class="nx">Response</span> <span class="nx">Body</span>
<span class="p">{</span>
  <span class="s2">"Application"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"BundleId"</span><span class="p">:</span> <span class="s2">"com.appdirect.HarmonyAuthenticator"</span><span class="p">,</span>
      <span class="s2">"Id"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"Value"</span><span class="p">:</span> <span class="mi">454</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>


<span class="mi">3</span><span class="p">.</span> <span class="nx">Create</span> <span class="nx">VPP</span> <span class="nx">application</span> <span class="nx">Smart</span> <span class="nx">Group</span>

<span class="nx">POST</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mdm/smartgroups</span>

<span class="nx">Request</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Sample Smart Group"</span><span class="p">,</span>
  <span class="s2">"CriteriaType"</span><span class="p">:</span> <span class="s2">"UserDevice"</span><span class="p">,</span>
  <span class="s2">"ManagedByOrganizationGroupId"</span><span class="p">:</span> <span class="mi">1000</span>
<span class="p">}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"Value"</span><span class="p">:</span> <span class="mi">800</span>
<span class="p">}</span>

<span class="mi">4</span><span class="p">.</span> <span class="nx">Enable</span> <span class="nx">Device</span> <span class="nx">based</span> <span class="nx">assignment</span>

<span class="nx">PUT</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mam/apps/purchased/EnableDeviceAssignmentForVppApp/{applicationId}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"status"</span><span class="p">:</span> <span class="s2">"Device based assignment successfully enabled for the app."</span><span class="p">,</span>
  <span class="s2">"statusCode"</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="mi">5</span><span class="p">.</span> <span class="nx">Get</span> <span class="nx">application</span> <span class="nx">allocation</span> <span class="nx">details</span>

<span class="nx">GET</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mam/apps/purchased/{applicationId}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"ManagedBy"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="s2">"Licenses"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"TotalLicenses"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">"OnHold"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">"Allocated"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">"Unallocated"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">"Redeemed"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">"ExternallyRedeemed"</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">},</span>
  <span class="s2">"Assignments"</span><span class="p">:</span> <span class="p">[],</span>
  <span class="s2">"Deployment"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"AssignmentType"</span><span class="p">:</span> <span class="s2">"Auto"</span><span class="p">,</span>
    <span class="s2">"RemoveOnUnenroll"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"PreventApplicationBackup"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">"UseVPN"</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="mi">6</span><span class="p">.</span> <span class="nx">Create</span> <span class="nx">VPP</span> <span class="nx">application</span> <span class="nx">allocation</span>

<span class="nx">POST</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mam/apps/purchased/{applicationId}/assignment</span>

<span class="nx">Request</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"AppConfigList"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"Key"</span><span class="p">:</span> <span class="s2">"deviceId"</span><span class="p">,</span>
      <span class="s2">"Type"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">"Value"</span><span class="p">:</span> <span class="s2">"{DeviceSerialNumber}"</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="s2">"Key"</span><span class="p">:</span> <span class="s2">"consumerKey"</span><span class="p">,</span>
      <span class="s2">"Type"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">"Value"</span><span class="p">:</span> <span class="s2">"HP11rzsslR"</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="s2">"Key"</span><span class="p">:</span> <span class="s2">"consumerSecret"</span><span class="p">,</span>
      <span class="s2">"Type"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">"Value"</span><span class="p">:</span> <span class="s2">"15vicj1dMSsZ2xcO6O2X"</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"Assignments"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s2">"Allocated"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
    <span class="s2">"SmartGroupId"</span><span class="p">:</span> <span class="mi">800</span>
  <span class="p">}],</span>
  <span class="s2">"Deployment"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"AssignmentType"</span><span class="p">:</span> <span class="s2">"Auto"</span>
  <span class="p">},</span>
  <span class="s2">"SendApplicationConfiguration"</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>

</code></pre>
<p>This endpoint assigns the specified VPP application to the company.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://mdm.com/api/app-subscription</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>comapany_id</td>
<td>The MDM Company ID.</td>
</tr>
<tr>
<td>bundle_id</td>
<td>Bundle ID of the iTunes Application.</td>
</tr>
</tbody></table>

<h3 id="response-parameters">Response Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>The MDM Subscription ID.</td>
</tr>
</tbody></table>

          <h1 id="app-subscription-removed">App Subscription Removed</h1>

<p>When a company removes applications from AppDirect Marketplace, a VPP application must be unassigned to the company in the MDM.</p>

<h2 id="remove-vpp-application-from-the-company">Remove VPP application from the company</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code>
<span class="mi">1</span><span class="p">.</span> <span class="nx">Update</span> <span class="nx">Smart</span> <span class="nx">Group</span> <span class="nx">Assignments</span>

<span class="nx">PUT</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mdm/smartgroups/{smartGroupId}</span>

<span class="nx">Request</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Sample Smart Group"</span><span class="p">,</span>
  <span class="s2">"CriteriaType"</span><span class="p">:</span> <span class="s2">"UserDevice"</span><span class="p">,</span>
  <span class="s2">"ManagedByOrganizationGroupId"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="s2">"UserAssignments"</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>

<span class="mi">2</span><span class="p">.</span> <span class="nx">Sync</span> <span class="nx">Devices</span>

<span class="nx">POST</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mdm/devices/{deviceId}/SyncDevice</span>

</code></pre>
<p>This endpoint remove the specified VPP application from the company.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://mdm.com/api/app-subscription/{subscription_id}</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>subscription_id</td>
<td>The MDM Subscription ID.</td>
</tr>
</tbody></table>

          <h1 id="app-assignment-added">App Assignment Added</h1>

<p>When an application is entitled to a user, the application must also be assigned to the user in the MDM.</p>

<h2 id="entitle-user-to-the-application">Entitle User to the Application</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code>
<span class="mi">1</span><span class="p">.</span> <span class="nx">Update</span> <span class="nx">Smart</span> <span class="nx">Group</span> <span class="nx">Assignments</span>

<span class="nx">PUT</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mdm/smartgroups/{smartGroupId}</span>

<span class="nx">Request</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span>
  <span class="s2">"Name"</span><span class="p">:</span> <span class="s2">"Sample Smart Group"</span><span class="p">,</span>
  <span class="s2">"CriteriaType"</span><span class="p">:</span> <span class="s2">"UserDevice"</span><span class="p">,</span>
  <span class="s2">"ManagedByOrganizationGroupId"</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="s2">"UserAssignments"</span><span class="p">:</span> <span class="p">[</span>
    <span class="mi">17</span>
  <span class="p">]</span>
<span class="p">}</span>

<span class="mi">2</span><span class="p">.</span> <span class="nx">Sync</span> <span class="nx">Devices</span>

<span class="nx">POST</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mdm/devices/{deviceId}/SyncDevice</span>

</code></pre>
<p>This endpoint entitles the user to an application.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://mdm.com/api/app-subscription/{subscription_id}/app-assignment/{user_id}</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>subscription_id</td>
<td>The MDM Subscription ID.</td>
</tr>
<tr>
<td>user_id</td>
<td>The MDM User ID.</td>
</tr>
</tbody></table>

          <h1 id="app-assignment-removed">App Assignment Removed</h1>

<p>When an application is unentitled from a user, the application must also be unassigned from the user in the MDM.</p>

<h2 id="unentitle-user-from-the-application">Unentitle User from the Application</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code>
<span class="mi">1</span><span class="p">.</span> <span class="nx">Unassign</span> <span class="nx">VPP</span> <span class="nx">application</span> <span class="nx">from</span> <span class="nx">Smart</span> <span class="nx">Group</span>

<span class="nx">DELETE</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mam/apps/purchased/{appId}/smartgroups/{smartGroupId}</span>

<span class="mi">2</span><span class="p">.</span> <span class="nx">Delete</span> <span class="nx">Smart</span> <span class="nx">Group</span>

<span class="nx">DELETE</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mdm/smartgroups/{smartGroupId}</span>

</code></pre>
<p>This endpoint unentitles the user from an application.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://mdm.com/api/app-subscription/{subscription_id}/app-assignment/{user_id}</code></p>

<h3 id="request-body">Request Body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>subscription_id</td>
<td>The MDM Subscription ID.</td>
</tr>
<tr>
<td>user_id</td>
<td>The MDM User ID.</td>
</tr>
</tbody></table>

          <h1 id="authorize-device">Authorize Device</h1>

<p>For the user&rsquo;s assigned applications to get pushed down to the device, the device must be assigned to the user by logging in to the device.</p>

<h2 id="assign-device-to-user">Assign Device to User</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code><span class="mi">1</span><span class="p">.</span> <span class="nx">Get</span> <span class="nx">Device</span> <span class="nx">ID</span>

<span class="nx">GET</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mdm/devices?searchby=SerialNumber&amp;id={device_serial_number}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span> 
  <span class="s2">"id"</span> <span class="p">:</span> <span class="mi">1123</span>
<span class="p">}</span>

<span class="mi">2</span><span class="p">.</span> <span class="nx">Assign</span> <span class="nx">Device</span> <span class="nx">to</span> <span class="nx">User</span>

<span class="nx">PATCH</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mdm/devices/{deviceId}/enrollmentuser/{userId}</span>

</code></pre>
<p>This endpoint will assign the device to the specified user.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://mdm.com/api/devices/{device_serial_number}/user/{user_id}</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>device_serial_number</td>
<td>The Device&rsquo;s Serial Number.</td>
</tr>
<tr>
<td>user_id</td>
<td>The MDM User ID.</td>
</tr>
</tbody></table>

          <h1 id="unauthorize-device">Unauthorize Device</h1>

<p>To unassociate the device from the user and remove all applications of the user from the device, the device must be unassigned to the user by logging out from the device.</p>

<h2 id="unssign-device-to-user">Unssign Device to User</h2>
<pre class="highlight javascript tab-javascript--airwatch"><code><span class="mi">1</span><span class="p">.</span> <span class="nx">Get</span> <span class="nx">Device</span> <span class="nx">ID</span>

<span class="nx">GET</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mdm/devices?searchby=SerialNumber&amp;id={device_serial_number}</span>

<span class="nx">Response</span> <span class="nx">Body</span><span class="p">:</span>
<span class="p">{</span> 
  <span class="s2">"id"</span> <span class="p">:</span> <span class="mi">1123</span>
<span class="p">}</span>

<span class="mi">2</span><span class="p">.</span> <span class="nx">Assign</span> <span class="nx">Device</span> <span class="nx">to</span> <span class="nx">User</span>

<span class="nx">PATCH</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//airwatch.com/api/mdm/devices/{deviceId}/enrollmentuser/{userId}</span>

<span class="p">{</span><span class="nx">userId</span><span class="p">}</span> <span class="nx">will</span> <span class="nx">be</span> <span class="nx">the</span> <span class="nx">Default</span> <span class="nx">Staging</span> <span class="nx">User</span><span class="err">'</span><span class="nx">s</span> <span class="nx">ID</span><span class="p">.</span>
</code></pre>
<p>This endpoint will unassign the device from the specified user.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">DELETE http://mdm.com/api/devices/{device_serial_number}/user/{user_id}</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>device_serial_number</td>
<td>The Device&rsquo;s Serial Number.</td>
</tr>
<tr>
<td>user_id</td>
<td>The MDM User ID.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript--airwatch">AirWatch</a>
                <a href="#" data-language-name="javascript--mobileiron">MobileIron</a>
          </div>
      </div>
    </div>
  </body>
</html>
